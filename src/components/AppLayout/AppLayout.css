:root {
  --wi-red: #dc2626;
  --wi-red-dark: #b91c1c;

  --wi-primary: #2563eb;

  --wi-bg: #f3f4f6;
  --wi-card: #ffffff;
  --wi-border: #e5e7eb;

  --wi-text: #111827;
  --wi-muted: #6b7280;

  /* Some components reference these */
  --wi-text-muted: var(--wi-muted);
  --wi-text-main: var(--wi-text);

  /* Layout tokens */
  --wi-header-h: 56px;
}

.wi-shell {
  min-height: 100vh;
  background: var(--wi-bg);
  color: var(--wi-text);
  font-family: system-ui, sans-serif;
}

.wi-main {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}

/* IMPORTANT: This is what makes collapse reclaim space */
.wi-layout {
  --wi-sidebar-w: 260px;

  display: flex;
  gap: 20px;
  align-items: flex-start;
}

.wi-layout.wi-layout--nav-collapsed {
  --wi-sidebar-w: 64px;
}

.wi-sidebar {
  width: var(--wi-sidebar-w);
  background: var(--wi-card);
  border: 1px solid var(--wi-border);
  border-radius: 12px;
  padding: 12px 10px;
  transition: width 140ms ease, padding 140ms ease;
  overflow: hidden; /* prevents inner nav forcing width */
}

.wi-sidebar.wi-sidebar--collapsed {
  padding: 10px 6px;
}

.wi-content {
  flex: 1;
  min-width: 0; /* prevents table/content overflow breaking layout */
}

/* Overlay for mobile drawer */
.wi-navOverlay {
  position: fixed;
  inset: 0;
  background: rgba(17, 24, 39, 0.45);
  z-index: 999;
}

/* Body scroll lock when drawer open */
.wi-body--navOpen {
  overflow: hidden;
}

/* ----- Mobile: off-canvas drawer, content stays primary ----- */
@media (max-width: 900px) {
  :root {
    --wi-header-h: 56px;
  }

  .wi-main {
    padding: 12px;
  }

  .wi-layout {
    gap: 12px;
  }

  /* Mobile mode flag (set by AppLayout.jsx) */
  .wi-layout.wi-layout--mobile {
    position: relative;
  }

  /* Make sidebar a drawer */
  .wi-layout.wi-layout--mobile .wi-sidebar {
    position: fixed;
    top: var(--wi-header-h);
    left: 12px;
    right: 12px;
    width: auto; /* ignore --wi-sidebar-w on mobile */
    max-width: 520px;
    height: calc(100dvh - var(--wi-header-h) - 24px);
    z-index: 1000;

    /* drawer animation */
    transform: translateY(-8px);
    opacity: 0;
    pointer-events: none;
    transition: transform 140ms ease, opacity 140ms ease;
  }

  /* When open */
  .wi-layout.wi-layout--mobile.wi-layout--mobileNavOpen .wi-sidebar {
    transform: translateY(0);
    opacity: 1;
    pointer-events: auto;
  }

  /* Content should be full-width; no forced column stacking */
  .wi-layout {
    flex-direction: column;
  }

  /* On mobile we do NOT want collapse changing width semantics */
  .wi-layout,
  .wi-layout.wi-layout--nav-collapsed {
    --wi-sidebar-w: 100%;
  }
}
